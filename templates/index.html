<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>PROSIT</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="../css/style.css" rel="stylesheet">
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!--[if lt IE 7]><p class="browsehappy">You are using an <strong>outdated</strong>browser. Please <a href="#">upgrade your browser</a>to improve your experience.</p><![endif]-->
    <div class="container-fluid" style="height:100%">
        <div class="row flex-nowrap" style="height:100%">
            <div class="col-auto px-0">
                <div id="sidebar" class="collapse collapse-horizontal show border-end">
                    <div id="sidebar-nav" class="list-group border-0 rounded-0 text-sm-start min-vh-100">

                        <h4 id="dashboardHeader">Filters</h4>
                        <hr class="line">
                        <div style="padding-left:10px; padding-right:10px;">
                            <input type="search" id="form1" class="form-control" placeholder="Rules query" aria-label="Search" />
                        </div>

                        <hr class="line">

                        <!-- <div class="box" style="text-align: center;">
                            <div class="rangeSlider">
                                <input type="range" class="circleRange" min="0" max="10" value="6">
                            </div>
                            <div class="value"></div>
                        </div> -->

                        <div class="slidecontainer" style="text-align: center; padding-left:10px; padding-bottom:0px">
                            <p>Glyph Radius: </p>

                            <span id="sliderVal"></span>
                            <br>
                            <div>
                                <input type="range" min="1" max="30" value="10" steps='1' class="slider" id="myRange">
                            </div>
                        </div>

                        <hr class="line">
                        <!-- Toggle glyph switch -->
                        <div>
                            <label class="form-check-label" for="toggleGlyph" style="text-align: center;">Toggle Glyph</label>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch" id="toggleGlyph" style="float: none; margin-left: 20%;" />
                            </div>
                        </div>

                        <hr class="line">

                        <!-- Toggle polar chart switch -->
                        <div>
                            <label class="form-check-label" for="toggleGlyph" style="text-align: center;">Toggle Polar chart</label>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch" id="togglePolarChart" style="float: none; margin-left: 20%;" />
                            </div>
                        </div>

                        <hr class="line">

                        <div>
                            <table style="width:100%;">
                                <tr>
                                    <td class="filterCheckbox">
                                        <input type="checkbox" id="brtCheckBox" checked>
                                        <br>
                                        <label>BRT</label>
                                    </td>
                                    <td class="filterCheckbox">
                                        <input type="checkbox" id="accCheckBox" checked>
                                        <br>
                                        <label>ACC</label>
                                    </td>
                                    <td class="filterCheckbox">
                                        <input type="checkbox" id="gyrCheckBox" checked>
                                        <br>
                                        <label>GYR</label>
                                    </td>
                                    <td class="filterCheckbox">
                                        <input type="checkbox" id="lckCheckBox" checked>
                                        <br>
                                        <label>LCK</label>
                                    </td>
                                </tr>
                            </table>

                        </div>

                        <hr class="line">

                        <div style="display:flex; justify-content: center; align-items: center;">
                            <button type="button" class="btn btn-outline-primary btn-sm">Submit</button>
                        </div>
                    </div>
                </div>
            </div>
            <main class="col ps-md-2 pb-10">
                <div class="row py-2" id="header">
                    <div class="col-1">
                        <a href="#" data-bs-target="#sidebar" data-bs-toggle="collapse" class="border rounded-3 p-1 text-decoration-none">
                            Menu
                        </a>
                    </div>
                    <div class="col-11" style="text-align:left;">
                        <h4 id="dashboardHeader">PROSIT Dashboard</h4>
                    </div>
                </div>
                <div class="pa-1" id="bottom">
                    <svg class="svg1" id="chart1"></svg>
                    <svg class="svg2" id="chart2"></svg>
                    <svg class="svg3" id="chart3"></svg>
                    <svg class="svg3" id="chart4"></svg>
                    <svg class="svg3" id="chart5"></svg>
                </div>


            </main>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js">
    </script>
    <!-- <script src="https://d3js.org/d3.v7.min.js"></script> -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <!-- <script src="https://d3js.org/d3.v3.min.js"></script> -->
    <!-- D3.js charts -->
    <!-- <script src="../js/demo/chart1.js"></script> -->
    <script src="../js/demo/barchart.js"></script>
    <!-- demo forceSimulation -->
    <script src="../js/demo/forceSimulation.js"></script>
    <!-- paralled cord chart -->
    <script src="../js/demo/parallelCord.js"></script>

    <!-- PROSIT Charts -->
    <!-- Glyph scatter plot -->
    <script src="../js/radialGlyphsPlot.js"></script>
    <script src="../js/flowerGlyphPlot.js"></script>
    <!-- Spiral time chart -->
    <script src="../js/glyph_test.js"></script>
    <!-- dummy glyph -->
    <script src="../js/glyph.js"></script>
    <!-- dummy ploar chart -->
    <script src="../js/polar_chart.js"></script>
    <script src="../js/grid.js"></script>

    <script>
        // glyphChart ="chart1";
        // parallelCordChart ="chart2";
        // polarChart ="chart3";
        // forcedSimulationChart ="chart4"
        // barchart ="chart5"

        var brtChecked = true;
        var accChecked = true;
        var gyrChecked = true;
        var lckChecked = true;


        updateRadialGlyphs("chart1", "chart2", radius = 10, brtChecked, accChecked, gyrChecked, lckChecked);
        parallelCord('chart3');
        // polar_chart("chart2")
        forceSimulation('chart4');
        barchart('chart5');

        // auto refresh after window resizing
        jQuery(function($) {
            var windowWidth = $(window).width();
            var windowHeight = $(window).height();

            $(window).resize(function() {
                if (windowWidth != $(window).width() || windowHeight != $(window).height()) {
                    location.reload();
                    return;
                }
            });
        });

        //range slider 
        var slider = document.getElementById("myRange");
        var output = document.getElementById("sliderVal");
        output.innerHTML = slider.value;
        slider.oninput = function() {
            plotCharts(this.value, toggleGlyph, brtChecked, accChecked, gyrChecked, lckChecked)
            output.innerHTML = this.value;
        }

        //toggleGlyph switch
        var toggleGlyph = "radialGlyph"
        $("#toggleGlyph").on('change', function() {
            if ($(this).is(':checked')) {
                toggleGlyph = "flowerGlyph";
            } else {
                toggleGlyph = "radialGlyph";
            }
            plotCharts(slider.value, toggleGlyph, brtChecked, accChecked, gyrChecked, lckChecked)
        });

        $("#brtCheckBox").on('change', function() {
            if ($(this).is(':checked')) {
                brtChecked = true
                console.log("Brt Checked")
            } else {
                brtChecked = false
                console.log("Brt Unchecked")
            }
            plotCharts(slider.value, toggleGlyph, brtChecked, accChecked, gyrChecked, lckChecked)
        });

        $("#accCheckBox").on('change', function() {
            if ($(this).is(':checked')) {
                accChecked = true
                console.log("Acc Checked")
            } else {
                accChecked = false
                console.log("Acc Unchecked")
            }
            plotCharts(slider.value, toggleGlyph, brtChecked, accChecked, gyrChecked, lckChecked)
        });

        $("#gyrCheckBox").on('change', function() {
            if ($(this).is(':checked')) {
                gyrChecked = true
                console.log("Gyr Checked")
            } else {
                gyrChecked = false
                console.log("Gyr Unchecked")
            }
            plotCharts(slider.value, toggleGlyph, brtChecked, accChecked, gyrChecked, lckChecked)
        });

        $("#lckCheckBox").on('change', function() {
            if ($(this).is(':checked')) {
                lckChecked = true
                console.log("Lck Checked")
            } else {
                lckChecked = false
                console.log("Lck Unchecked")
            }
            plotCharts(slider.value, toggleGlyph, brtChecked, accChecked, gyrChecked, lckChecked)
        });

        //togglePolarChart switch
        var togglePolarChart = "circular"
        $("#togglePolarChart").on('change', function() {
            if ($(this).is(':checked')) {
                togglePolarChart = "lateral";
                console.log("lateral chart will be displayed")
                    // updateFlowerGlyphs("chart1","chart2", radius = slider.value);
            } else {
                toggleGlyph = "circular";
                console.log("circular chart will be displayed")
                    // updateRadialGlyphs("chart1","chart2", radius = slider.value);
            }

        });


        elem = $("#bottom")[0];

        let resizeObserver = new ResizeObserver(() => {
            console.log("sidebar closed");
            plotCharts(slider.value, toggleGlyph, brtChecked, accChecked, gyrChecked, lckChecked)
        });

        resizeObserver.observe(elem);

        function plotCharts(radius, toggleGlyph, brtChecked, accChecked, gyrChecked, lckChecked) {
            if (toggleGlyph == "radialGlyph") {
                updateRadialGlyphs("chart1", "chart2", radius, brtChecked, accChecked, gyrChecked, lckChecked);
            } else if (toggleGlyph == "flowerGlyph") {
                updateFlowerGlyphs("chart1", "chart2", radius, brtChecked, accChecked, gyrChecked, lckChecked);
            }
        }
    </script>
</body>

</html>